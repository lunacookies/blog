*,
::before,
::after {
  box-sizing: border-box;
  color: inherit;
  font: inherit;
  margin: 0;
  padding: 0;
  text-decoration: inherit;
}

em {
  font-style: italic;
}
strong {
  font-weight: 700;
}

html {
  font-size: 16px;
  @media (max-width: 700px) {
    font-size: 14px;
  }

  text-size-adjust: 100%;
  color-scheme: light dark;
  scroll-behavior: smooth;
}

@mixin gray() {
  color: #888;
  @media (prefers-color-scheme: dark) {
    color: #999;
  }
}

body {
  background-color: #fbfbfb;
  @media (prefers-color-scheme: dark) {
    background-color: #1e1e1e;
    color: #eee;
  }

  font-family: system-ui, sans-serif;
  line-height: 1.5;
  padding: 1.5rem;
  max-width: 35rem;
  margin: {
    left: auto;
    right: auto;
  }
  overflow-y: scroll;
}

main * + * {
  margin-top: 1.5em;
}

main p + p {
  margin-top: 1em;
}

h2 {
  font-weight: 700;
  margin-top: 5rem;
  margin-bottom: 2rem;

  > a:not(:hover) {
    background-image: none;
  }
}

header {
  margin-bottom: 8rem;

  > h1 {
    font-size: 1.2rem;
  }

  > .subtitle {
    margin-top: 0.5rem;
    @include gray();
  }
}

.signature {
  text-align: right;
  margin-top: 2rem;
}

footer {
  margin-top: 8rem;
  max-width: 18rem;

  > .link-cluster {
    margin-top: 1em;
  }
}

.post-list {
  margin-bottom: 4rem;

  > .post + .post {
    margin-top: 2rem;
  }

  > .post {
    > .subtitle,
    > .date {
      @include gray();
    }

    > * {
      margin-top: 0.25rem;
    }
  }

  // Remove ul styling.
  margin-left: 0;
  > .post::before {
    content: none;
  }
}

a {
  background-image: linear-gradient(currentColor, currentColor);
  background-repeat: no-repeat;
  background-position-y: 100%;
  background-size: 100% 1px;

  &:active {
    opacity: 0.5;
  }
}

blockquote {
  padding-left: 3rem;
  font-size: 0.85rem;
}

ul,
ol {
  list-style-type: none;
  margin-left: 1.5em;

  > li {
    margin-top: 0;
  }
}

ul > li::before {
  content: "•";
  position: absolute;
  width: 1em;
  margin-left: -1.5em;
}

ol > li {
  counter-increment: ol;
}

ol > li::before {
  font-variant-numeric: tabular-nums;
  content: counter(ol) ".";
  position: absolute;
  width: 1em;
  margin-left: -1.5em;
}

.footnotes {
  > ol > li + li {
    margin-top: 1em;
  }
}

img,
video {
  display: block;
  max-width: 100%;
}

table {
  font-variant-numeric: tabular-nums;

  display: block;
  overflow-x: auto;

  border-collapse: collapse;

  // gap between columns
  td + td,
  th + th {
    padding-left: 1rem;
  }

  thead > tr > th {
    font-weight: 700;
  }

  // border with space above and below
  thead > tr > th {
    border-bottom: 1px solid;
    padding-bottom: 0.5rem;
  }
  tbody > :first-child > td {
    padding-top: 0.5rem;
  }
}

sup {
  font-size: 0.7em;
  line-height: 0;
}

hr {
  border: none;
  text-align: center;

  &::before {
    content: "• • •";
  }
}

@mixin monospace {
  font-family: ui-monospace, SF Mono, Menlo, Consolas, monospace;
  font-size: 0.95em;
}

code {
  @include monospace();
}

pre {
  background-color: #f3f3f3;
  @media (prefers-color-scheme: dark) {
    background-color: #181818;
  }

  padding: 1.5rem;
  font-size: 0.85em;
  line-height: 1.3;
  overflow-x: auto;
}

.chroma {
  .c1,
  .cm {
    @include gray();
  }
}

@import "term.scss";
